<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>ホーム</title>
		<link rel="stylesheet" type="text/css" href="style.css">
	</head>

	<!-- ボディ: 実際のページの内容を書く -->
	<body>
		<!-- 上のメニューバー -->
		<header>
			<nav>
				<ul class="left">
					<li class="logo">チクちゃ</li>
					<li id="test-button">ホーム</li>
				</ul>
			</nav>
		</header>
		<article>
		
		<div class="blocka" align="center">
			<table border="0">
				<tr bgcolor="#40BAD2">
					<th width="150" height="50"><font color="#FFFFFF">コミュニティ名</font></th>
					<th width="150"  height="50"><font color="#FFFFFF">ホスト名</font></th>
				</tr>
			</table>
			<table border="0">
					<tbody id="test-text">
					</tbody>	
			</table>
		
			<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
			<script>
			$(function() {
				// ここからプログラムを書きます
		
				var count=0;

				// ボタンをクリックしたとき
				$("#test-button3,#test-button").click(function () {
				
					count+=10;
		 			// サーバと通信する
		 			$.get({
						url: "http://chikuwabuz2.herokuapp.com/community/list/name/"+count, // 接続先
			
						// 通信が完了したとき
						success: function(data) {

							$("#test-text").text("");
							//$("#test-text2").text("");

							// コミュニティを1つずつ表示する
							for (var i = 0; i < data.length; i++) {
					
								if(i % 2== 0){
									$("#test-text").append("<tr bgcolor='#ADD8E6'><td width='150'><font color='#5F9EA0'><a href='./join.html?community=" + data[i]["_id"] + "&host_name=" + encodeURIComponent(data[i].host_name) + "&community_name=" + encodeURIComponent(data[i].name) + "'>" + data[i].name + (data[i].protected?"&#128274;":" ") + "</font></td>,"+ 
														"<td width='150'><font color='#5F9EA0'>" + data[i].host_name + "</font></td></tr>");
								}

								else{

								$("#test-text").append("<tr bgcolor='#F0F8FF'><td width='150'><font color='#5F9EA0'><a href='./join.html?community=" + data[i]["_id"] + "&host_name=" + encodeURIComponent(data[i].host_name) + "&community_name=" + encodeURIComponent(data[i].name) + "'>" + data[i].name + (data[i].protected?"&#128274;":" ") + "</font></td>,"+ 
														"<td width='150'><font color='#5F9EA0'>" + data[i].host_name + "</font></td></tr>");
								}
							}
						}
					});
	 			});

				 // ここまで
	 		 });
			 </script>
		</div>

		<div class="blockb" align="center">
		
		<img id=chikuwabu src="ちくわぶ2.png" onclick="changeIMG()" title="ちくわぶより普通に大根が好き～～"><br>
		<script>

		//画像を配列に格納する
		var img = new Array();

		img[0] = new Image();
		img[0].src = "ちくわぶ2.png";
		img[1] = new Image();
		img[1].src = "大根.png";
		
		//画像番号用のグローバル変数
		var cnt=0;

		//画像切り替え関数
		function changeIMG(){
  
			  //画像番号を進める
			  if (cnt == 1)
			  { cnt=0; }
			  else
			  { cnt++; }
  
			  //画像を切り替える
			  document.getElementById("chikuwabu").src=img[cnt].src;
		}

		</script>


		<button id="button" type="button" style="height:40px;weight:120px; background-color:#40BAD2;" onclick="location.href='./make.html'"><font style="font-size:1.2em;font-weight:800; line-height:1em; color:#FFFFFF;">　コミュニティ作成　</font></button>

		</div>

		<div class="blockc" align="center">
		<table border="0">
	 		<tr bgcolor="#40BAD2">
				<th width="150" height="50"><font color="#FFFFFF">コミュニティ名</font></th>
				<th width="150"  height="50"><font color="#FFFFFF">ホスト名</font></th>
			</tr>
		</table>
		<table border="0">
				<tbody id="test-text2">
				</tbody>
		</table>
		<br>
		<div id="test-button3" align="left" style="height:40px;weight:120px;"><font style="font-size:1.2em;font-weight:800; line-height:1em; color:#40BAD2;">　　さらに表示</font></div>
		
			<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
			<script>

	 		 $(function() {
				// ここからプログラムを書きます
	var input = [];
	konami = [38,38,40,40,37,39,37,39,66,65];
	onami = [38,38,40,40,37,39,37,39,65,66];
	sonami = [38,38,40,40,37,39,37,39,65,67];

	$(window).keyup(function(e){
		input.push(e.keyCode);

		if (input.toString().indexOf(konami) >= 0)
		{
			$("img").animate({zIndex: 1}, {
			duration: 3000,
			step: function(now) {
				$(this).css({transform:'rotate(' + (now * 1080) + 'deg)'});
			},
			complete: function() {
					$("img").css({zIndex: 0});
			}});
			input = [];
		}
		if (input.toString().indexOf(onami) >= 0)
		{
			$("img").animate({zIndex: 1}, {
				duration: 3000,
				step: function(now) {
					$(this).css({transform:'rotate(' + (now * -1080) + 'deg)'});
				},
				complete: function() {
						$("img").css({zIndex: 0});
				}});
			input = [];
		}
		if (input.toString().indexOf(sonami) >= 0)
		{
			$("img").animate({zIndex: 1}, {
				duration: 100000,
				step: function(now) {
					$(this).css({transform:'rotate(' + (now * 10800000) + 'deg)'});
				},
				complete: function() {
						$("img").css({zIndex: 0});
				}});
			input = [];
		}
	});


				var count2 = 0;	
				 // ボタンをクリックしたとき
				$("#test-button3,#test-button").click(function (){

					count2+=10;
					// サーバと通信する
					$.get({
						 url: "http://chikuwabuz2.herokuapp.com/community/list/created_at/"+count2, // 接続先
			
						// 通信が完了したとき
						success: function(data) {

							$("#test-text2").text("");
			
							// コミュニティを1つずつ表示する
							for (var i = 0; i < data.length; i++) {
			
								if(i % 2== 0){
									$("#test-text2").append("<tr bgcolor='#ADD8E6'><td width='150'><font color='#5F9EA0'><a href='./join.html?community=" + data[i]["_id"] + "&host_name=" + encodeURIComponent(data[i].host_name) + "&community_name=" + encodeURIComponent(data[i].name) + "'>" + data[i].name + (data[i].protected?"&#128274;":" ") + "</font></td>,"+ 
														"<td width='150'><font color='#5F9EA0'>" + data[i].host_name + "</font></td></tr>");
								}

								else{
									$("#test-text2").append("<tr bgcolor='#F0F8FF'><td width='150'><font color='#5F9EA0'><a href='./join.html?community=" + data[i]["_id"] + "&host_name=" + encodeURIComponent(data[i].host_name) + "&community_name=" + encodeURIComponent(data[i].name) + "'>" + data[i].name + (data[i].protected?"&#128274;":" ") +"</font></td>,"+ 
														"<td width='150'><font color='#5F9EA0'>" + data[i].host_name + "</font></td></tr>");
								}
					
							}

						}
			
					});
				});

				 // ここまで
				$("#test-button").trigger("click");
			});
			</script>
	



		</div>


		<style type="text/css">
		div.blocka {

			float: left;
			width: 30%;
		}
		div.blockb {
		  
			float: left;
			width: 40%;
		}
		div.blockc {
		  
			float: left;
			width: 30%;
		}
		</style>

		</article>

	</body>

</html>
